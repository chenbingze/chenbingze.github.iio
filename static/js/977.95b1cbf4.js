"use strict";(self["webpackChunkai_livestock_fronted"]=self["webpackChunkai_livestock_fronted"]||[]).push([[977],{81618:function(e){(function(a,n){e.exports=n()})(0,(function(){function e(e){var l=[];return e.AMapUI&&l.push(a(e.AMapUI)),e.Loca&&l.push(n(e.Loca)),Promise.all(l)}function a(e){return new Promise((function(a,n){var r=[];if(e.plugins)for(var c=0;c<e.plugins.length;c+=1)-1==o.AMapUI.plugins.indexOf(e.plugins[c])&&r.push(e.plugins[c]);if(t.AMapUI===l.failed)n("前次请求 AMapUI 失败");else if(t.AMapUI===l.notload){t.AMapUI=l.loading,o.AMapUI.version=e.version||o.AMapUI.version,c=o.AMapUI.version;var d=document.body||document.head,s=document.createElement("script");s.type="text/javascript",s.src="https://webapi.amap.com/ui/"+c+"/main.js",s.onerror=function(e){t.AMapUI=l.failed,n("请求 AMapUI 失败")},s.onload=function(){if(t.AMapUI=l.loaded,r.length)window.AMapUI.loadUI(r,(function(){for(var e=0,n=r.length;e<n;e++){var l=r[e].split("/").slice(-1)[0];window.AMapUI[l]=arguments[e]}for(a();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()}));else for(a();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()},d.appendChild(s)}else t.AMapUI===l.loaded?e.version&&e.version!==o.AMapUI.version?n("不允许多个版本 AMapUI 混用"):r.length?window.AMapUI.loadUI(r,(function(){for(var e=0,n=r.length;e<n;e++){var l=r[e].split("/").slice(-1)[0];window.AMapUI[l]=arguments[e]}a()})):a():e.version&&e.version!==o.AMapUI.version?n("不允许多个版本 AMapUI 混用"):i.AMapUI.push((function(e){e?n(e):r.length?window.AMapUI.loadUI(r,(function(){for(var e=0,n=r.length;e<n;e++){var l=r[e].split("/").slice(-1)[0];window.AMapUI[l]=arguments[e]}a()})):a()}))}))}function n(e){return new Promise((function(a,n){if(t.Loca===l.failed)n("前次请求 Loca 失败");else if(t.Loca===l.notload){t.Loca=l.loading,o.Loca.version=e.version||o.Loca.version;var r=o.Loca.version,c=o.AMap.version.startsWith("2"),d=r.startsWith("2");if(c&&!d||!c&&d)n("JSAPI 与 Loca 版本不对应！！");else{c=o.key,d=document.body||document.head;var s=document.createElement("script");s.type="text/javascript",s.src="https://webapi.amap.com/loca?v="+r+"&key="+c,s.onerror=function(e){t.Loca=l.failed,n("请求 AMapUI 失败")},s.onload=function(){for(t.Loca=l.loaded,a();i.Loca.length;)i.Loca.splice(0,1)[0]()},d.appendChild(s)}}else t.Loca===l.loaded?e.version&&e.version!==o.Loca.version?n("不允许多个版本 Loca 混用"):a():e.version&&e.version!==o.Loca.version?n("不允许多个版本 Loca 混用"):i.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var l;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(l||(l={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:l.notload,AMapUI:l.notload,Loca:l.notload},i={AMap:[],AMapUI:[],Loca:[]},r=[],c=function(e){"function"==typeof e&&(t.AMap===l.loaded?e(window.AMap):r.push(e))};return{load:function(a){return new Promise((function(n,i){if(t.AMap==l.failed)i("");else if(t.AMap==l.notload){var d=a.key,s=a.version,u=a.plugins;d?(window.AMap&&"lbs.amap.com"!==location.host&&i("禁止多种API加载方式混用"),o.key=d,o.AMap.version=s||o.AMap.version,o.AMap.plugins=u||o.AMap.plugins,t.AMap=l.loading,s=document.body||document.head,window.___onAPILoaded=function(o){if(delete window.___onAPILoaded,o)t.AMap=l.failed,i(o);else for(t.AMap=l.loaded,e(a).then((function(){n(window.AMap)}))["catch"](i);r.length;)r.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+d+"&plugin="+o.AMap.plugins.join(","),u.onerror=function(e){t.AMap=l.failed,i(e)},s.appendChild(u)):i("请填写key")}else if(t.AMap==l.loaded)if(a.key&&a.key!==o.key)i("多个不一致的 key");else if(a.version&&a.version!==o.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(d=[],a.plugins)for(s=0;s<a.plugins.length;s+=1)-1==o.AMap.plugins.indexOf(a.plugins[s])&&d.push(a.plugins[s]);d.length?window.AMap.plugin(d,(function(){e(a).then((function(){n(window.AMap)}))["catch"](i)})):e(a).then((function(){n(window.AMap)}))["catch"](i)}else if(a.key&&a.key!==o.key)i("多个不一致的 key");else if(a.version&&a.version!==o.AMap.version)i("不允许多个版本 JSAPI 混用");else{var p=[];if(a.plugins)for(s=0;s<a.plugins.length;s+=1)-1==o.AMap.plugins.indexOf(a.plugins[s])&&p.push(a.plugins[s]);c((function(){p.length?window.AMap.plugin(p,(function(){e(a).then((function(){n(window.AMap)}))["catch"](i)})):e(a).then((function(){n(window.AMap)}))["catch"](i)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:l.notload,AMapUI:l.notload,Loca:l.notload},i={AMap:[],AMapUI:[],Loca:[]}}}}))},89341:function(e,a,n){n.d(a,{O:function(){return o}});var l=n(36026);const o=e=>(0,l.Z)({url:"/farmowner/select",method:"POST",data:e})},64864:function(e,a,n){n.r(a),n.d(a,{default:function(){return oe}});var l=n(384),o=(n(59853),n(24907)),t=(n(40121),n(37336)),i=(n(48504),n(20837),n(77049)),r=(n(75915),n(88464)),c=(n(45177),n(6556)),d=(n(87228),n(94035)),s=(n(96152),n(66252)),u=n(49963),p=n(3577);const f=e=>((0,s.dD)("data-v-584b7bea"),e=e(),(0,s.Cn)(),e),m=f((()=>(0,s._)("span",{class:"top"},"牧场名称：",-1))),w=f((()=>(0,s._)("span",{class:"top"},"省/市/区：",-1))),g=f((()=>(0,s._)("span",{class:"top"},"圈舍数量：",-1))),h=f((()=>(0,s._)("span",null,"-",-1))),v=f((()=>(0,s._)("span",{class:"top"},"项圈数量：",-1))),y=f((()=>(0,s._)("span",{style:{"line-height":"32px"}},"-",-1))),A=f((()=>(0,s._)("span",{class:"top"},"牲畜数量：",-1))),M=f((()=>(0,s._)("span",{style:{"line-height":"32px"}},"-",-1))),_=(0,s.Uk)("搜索"),b=(0,s.Uk)("重置"),U={class:"app-container"},k=["textContent"],I=["textContent"],x=(0,s.Uk)("详情"),C={class:"pagination"};function S(e,a,n,f,S,W){const L=d.EZ,D=c.Dv,V=(0,s.up)("elui-china-area-dht"),z=r.dq,O=i.mi,P=t.$Y,Q=t.eI,j=o.R,E=(0,s.up)("FarmDetailDialog"),K=l.t;return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s.Wm)(D,{span:6},{default:(0,s.w5)((()=>[m,(0,s.Wm)(L,{modelValue:f.farmOwnSelectQuery.name,"onUpdate:modelValue":a[0]||(a[0]=e=>f.farmOwnSelectQuery.name=e),placeholder:"请输入牧场名称",clearable:"",onKeyup:a[1]||(a[1]=(0,u.D2)((e=>f.handleSearch()),["enter"])),style:{width:"200px"},class:"filter-item"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(D,{span:6},{default:(0,s.w5)((()=>[w,(0,s.Wm)(V,{onChange:a[2]||(a[2]=e=>f.onAreaChange()),modelValue:f.tempLocation,"onUpdate:modelValue":a[3]||(a[3]=e=>f.tempLocation=e),placeholder:"请选择所在区域",isall:!0,style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(D,{span:6},{default:(0,s.w5)((()=>[g,(0,s.Wm)(L,{modelValue:f.farmOwnSelectQuery.enclosure_min,"onUpdate:modelValue":a[4]||(a[4]=e=>f.farmOwnSelectQuery.enclosure_min=e),placeholder:"最小数量",clearable:"",onKeyup:a[5]||(a[5]=(0,u.D2)((e=>f.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"]),h,(0,s.Wm)(L,{modelValue:f.farmOwnSelectQuery.enclosure_max,"onUpdate:modelValue":a[6]||(a[6]=e=>f.farmOwnSelectQuery.enclosure_max=e),placeholder:"最大数量",clearable:"",onKeyup:a[7]||(a[7]=(0,u.D2)((e=>f.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(D,{span:6},{default:(0,s.w5)((()=>[v,(0,s.Wm)(L,{modelValue:f.farmOwnSelectQuery.necklace_min,"onUpdate:modelValue":a[8]||(a[8]=e=>f.farmOwnSelectQuery.necklace_min=e),placeholder:"最小数量",clearable:"",onKeyup:a[9]||(a[9]=(0,u.D2)((e=>f.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"]),y,(0,s.Wm)(L,{modelValue:f.farmOwnSelectQuery.necklace_max,"onUpdate:modelValue":a[10]||(a[10]=e=>f.farmOwnSelectQuery.necklace_max=e),placeholder:"最大数量",clearable:"",onKeyup:a[11]||(a[11]=(0,u.D2)((e=>f.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"])])),_:1})])),_:1}),(0,s.Wm)(z,{justify:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{span:6},{default:(0,s.w5)((()=>[A,(0,s.Wm)(L,{modelValue:f.farmOwnSelectQuery.livestock_min,"onUpdate:modelValue":a[12]||(a[12]=e=>f.farmOwnSelectQuery.livestock_min=e),placeholder:"最小数量",clearable:"",onKeyup:a[13]||(a[13]=(0,u.D2)((e=>f.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"]),M,(0,s.Wm)(L,{modelValue:f.farmOwnSelectQuery.livestock_max,"onUpdate:modelValue":a[14]||(a[14]=e=>f.farmOwnSelectQuery.livestock_max=e),placeholder:"最大数量",clearable:"",onKeyup:a[15]||(a[15]=(0,u.D2)((e=>f.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(D,{span:6},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{type:"primary",icon:"Search",onClick:a[16]||(a[16]=e=>f.handleSearch())},{default:(0,s.w5)((()=>[_])),_:1}),(0,s.Wm)(O,{icon:"Refresh",onClick:a[17]||(a[17]=e=>f.resetQuery())},{default:(0,s.w5)((()=>[b])),_:1})])),_:1})])),_:1}),(0,s.Wm)(z),(0,s._)("div",U,[(0,s.wy)(((0,s.wg)(),(0,s.j4)(Q,{data:f.tableData,style:{width:"100%"},border:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{label:"序号",width:"50",type:"index",align:"center"},{default:(0,s.w5)((e=>[(0,s._)("span",{textContent:(0,p.zw)(f.getIndex(e.$index))},null,8,k)])),_:1}),(0,s.Wm)(P,{label:"牧场名",align:"center",prop:"fields.name","show-overflow-tooltip":!0}),(0,s.Wm)(P,{label:"所在地区",align:"center","show-overflow-tooltip":!0},{default:(0,s.w5)((e=>[(0,s._)("span",{textContent:(0,p.zw)(f.formatArea(e.row.fields))},null,8,I)])),_:1}),(0,s.Wm)(P,{label:"圈舍数量",align:"center",prop:"fields.enclosure_number","show-overflow-tooltip":!0}),(0,s.Wm)(P,{label:"牲畜数",align:"center",prop:"fields.livestock_number","show-overflow-tooltip":!0}),(0,s.Wm)(P,{label:"项圈数",align:"center",prop:"fields.necklace_number","show-overflow-tooltip":!0}),(0,s.Wm)(P,{label:"操作",align:"center",width:"160px","class-name":"small-padding fixed-width"},{default:(0,s.w5)((e=>[(0,s.Wm)(O,{link:"",type:"primary",icon:"Tickets",onClick:a=>f.handleDetail(e.row)},{default:(0,s.w5)((()=>[x])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[K,f.loading]]),(0,s._)("div",C,[(0,s.Wm)(j,{background:"",layout:"total, sizes, prev, pager, next","current-page":f.pageParams.pageIndex,"onUpdate:current-page":a[18]||(a[18]=e=>f.pageParams.pageIndex=e),"page-size":f.pageParams.pageSize,"onUpdate:page-size":a[19]||(a[19]=e=>f.pageParams.pageSize=e),total:f.pageParams.pageTotal,"page-sizes":[2,5,10,20,30,50,100],onCurrentChange:f.handlePageChange,onSizeChange:f.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])]),(0,s.Wm)(E,{detailVisible:f.detailVisible,"onUpdate:detailVisible":a[20]||(a[20]=e=>f.detailVisible=e),farmDetail:f.farmDetail,"onUpdate:farmDetail":a[21]||(a[21]=e=>f.farmDetail=e),onOnConfirm:f.onDialogConfirm},null,8,["detailVisible","farmDetail","onOnConfirm"])])],64)}var W=n(89341),L=n(2262),D=n(70523),V=n(8350),z=(n(85134),n(69992)),O=(n(84948),n(54788)),P=(n(37903),n(33618),n(86660));n(28475);const Q=e=>((0,s.dD)("data-v-4ce37844"),e=e(),(0,s.Cn)(),e),j={class:"cell-item"},E=(0,s.Uk)(" 牧场名称 "),K={class:"cell-item"},H=(0,s.Uk)(" 建立/修改时间 "),T={class:"cell-item"},J=(0,s.Uk)(" 所在地 "),q=Q((()=>(0,s._)("div",{id:"mapContainer"},"这里是地图",-1))),B={style:{"text-align":"center"}},F=(0,s.Uk)("取消"),Z=(0,s.Uk)("确认");function R(e,a,n,l,o,t){const r=(0,s.up)("office-building"),c=P.gn,d=z.QQ,u=(0,s.up)("tickets"),f=O.Ks,m=(0,s.up)("location"),w=z.Lf,g=i.mi,h=V.d0;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(h,{modelValue:e.visible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.visible=a),onOpen:a[3]||(a[3]=e=>l.onOpenDialog()),onClose:a[4]||(a[4]=e=>l.onCloseDialog()),title:"牧场详情","show-close":!0,center:"",width:"80%","append-to-body":"",ref:"dialog"},{footer:(0,s.w5)((()=>[(0,s._)("div",B,[(0,s.Wm)(g,{onClick:a[0]||(a[0]=e=>l.handleCancel())},{default:(0,s.w5)((()=>[F])),_:1}),(0,s.Wm)(g,{type:"primary",onClick:a[1]||(a[1]=e=>l.handleConfirm())},{default:(0,s.w5)((()=>[Z])),_:1})])])),default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{class:"margin-top",column:2,size:l.size,border:""},{extra:(0,s.w5)((()=>[])),default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{label:(0,s.w5)((()=>[(0,s._)("div",j,[(0,s.Wm)(c,{style:(0,p.j5)(l.iconStyle)},{default:(0,s.w5)((()=>[(0,s.Wm)(r)])),_:1},8,["style"]),E])])),default:(0,s.w5)((()=>[(0,s.Uk)(" "+(0,p.zw)(l.farmDetail.fields.name),1)])),_:1}),(0,s.Wm)(d,null,{label:(0,s.w5)((()=>[(0,s._)("div",K,[(0,s.Wm)(c,{style:(0,p.j5)(l.iconStyle)},{default:(0,s.w5)((()=>[(0,s.Wm)(u)])),_:1},8,["style"]),H])])),default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(f,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,p.zw)(l.farmDetail.fields.create_time),1)])),_:1}),(0,s.Wm)(f,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,p.zw)(l.farmDetail.fields.update_time),1)])),_:1})])])),_:1}),(0,s.Wm)(d,null,{label:(0,s.w5)((()=>[(0,s._)("div",T,[(0,s.Wm)(c,{style:(0,p.j5)(l.iconStyle)},{default:(0,s.w5)((()=>[(0,s.Wm)(m)])),_:1},8,["style"]),J])])),default:(0,s.w5)((()=>[(0,s.Uk)(" "+(0,p.zw)(l.formateArea(l.farmDetail.fields)),1)])),_:1})])),_:1},8,["size"])]),q])),_:1},8,["modelValue"])])}var Y=n(81618),$=n.n(Y),X={props:{detailVisible:{type:Boolean,default:!1},farmDetail:{type:Object}},emits:["update:detailVisible","on-confirm"],setup(e,{emit:a}){const n=(0,L.XI)(null);let l=null;const{detailVisible:o,farmDetail:t}=(0,L.BK)(e),i=(0,L.qj)({visible:o.value}),r=(0,L.iH)(""),c=(0,s.Fl)((()=>{const e={large:"8px",default:"6px",small:"4px"};return{marginRight:e[r.value]||e.default}})),d=(0,s.Fl)((()=>{const e={large:"32px",default:"28px",small:"24px"};return{marginTop:e[r.value]||e.default}}));function u(){a("update:detailVisible",!1),console.log("on close dialog")}function p(){g(),console.log("farm detail",t.value)}function f(){a("update:detailVisible",!1)}function m(){a("on-confirm","子组件的值")}function w(e){return e.provience+" "+e.city+" "+e.county}function g(){const e=t.value.fields.lng,a=t.value.fields.lat;$().load({key:"27adc4106b70fb282c08cfb77548785a",version:"2.0",plugins:[""]}).then((o=>{l=o,n.value=new l.Map("mapContainer",{viewMode:"3D",zoom:15,center:[e,a]});const i=new l.Marker({position:new l.LngLat(e,a),title:t.value.fields.name}),r=new l.Marker({position:new l.LngLat(108.72,34.36)}),c=new l.Marker({position:new l.LngLat(107.75,34.28)}),d=new l.Marker({position:new l.LngLat(107.8,34)}),s=new l.Marker({position:new l.LngLat(106.062114,37.425702)});n.value.add(i),n.value.add(r),n.value.add(c),n.value.add(d),n.value.add(s)})).catch((e=>{console.log(e)}))}return(0,s.YP)(o,(e=>{i.visible=e}),{immediate:!0}),(0,s.bv)((()=>{})),window._AMapSecurityConfig={securityJsCode:"1ef06a21c2bad86281c3e75ba84df476"},{...(0,L.BK)(i),farmDetail:t,size:r,iconStyle:c,blockMargin:d,onCloseDialog:u,onOpenDialog:p,handleCancel:f,handleConfirm:m,formateArea:w}}},G=n(83744);const N=(0,G.Z)(X,[["render",R],["__scopeId","data-v-4ce37844"]]);var ee=N;const ae=(new D.EluiChinaAreaDht.ChinaArea).chinaAreaflat;var ne={components:{EluiChinaAreaDht:D.EluiChinaAreaDht,FarmDetailDialog:ee},setup(){const e=(0,L.qj)({}),a=(0,L.iH)(!1),n=(0,L.iH)([]),l=(0,L.iH)([]),o=(0,L.iH)([]),t=(0,L.iH)(!1),i=(0,L.iH)({}),r=(0,L.qj)({pageIndex:1,pageSize:10,pageTotal:0});async function c(){await(0,W.O)(e).then((e=>{l.value=e.data,console.log("farmList.value",l.value)})),l.value?(r.pageTotal=l.value.length,d(r.pageIndex,r.pageSize)):(r.pageTotal=0,o.value=[])}function d(e,a){const n=(e-1)*a,t=n+a;o.value=l.value.slice(n,t)}function s(e){r.pageIndex=e,d(r.pageIndex,r.pageSize)}function u(e){r.pageSize=e,d(1,r.pageSize)}function p(e){return(r.pageIndex-1)*r.pageSize+e+1}function f(){r.pageIndex=1;for(const a in e)""===e[a]&&delete e[a];console.log("farmOwnSelectQuery",e),c()}function m(e){return e.provience+" "+e.city+" "+e.county}function w(){delete e.provience,delete e.city,delete e.county,"all"===n.value[n.value.length-1]&&n.value.pop(),n.value[0]&&(e.provience=ae[n.value[0]].label),n.value[1]&&(e.city=ae[n.value[1]].label),n.value[2]&&(e.county=ae[n.value[2]].label)}function g(){n.value=[],Object.keys(e).forEach((a=>{delete e[a]}))}function h(e){console.log("handle edit")}function v(e){console.log("handle Detail"),t.value=!0,i.value=e}function y(){t.value=!1}return c(),{loading:a,farmOwnSelectQuery:e,tableData:o,tempLocation:n,pageParams:r,farmDetail:i,detailVisible:t,handlePageChange:s,handleSearch:f,handleSizeChange:u,formatArea:m,onAreaChange:w,resetQuery:g,getIndex:p,handleEdit:h,handleDetail:v,onDialogConfirm:y}}};const le=(0,G.Z)(ne,[["render",S],["__scopeId","data-v-584b7bea"]]);var oe=le},75915:function(e,a,n){n(235)},13171:function(e,a,n){n(3392)},87228:function(e,a,n){n(3392)},33618:function(e,a,n){n(54081)},54081:function(e,a,n){n(3392)},84948:function(e,a,n){n(3392),n(54081)},85134:function(e,a,n){n(3392)},96152:function(e,a,n){n(93979)},93979:function(e,a,n){n(3392)},56450:function(e,a,n){n(3392)},40121:function(e,a,n){n(3392),n(40109)},45177:function(e,a,n){n(3392)},81748:function(e,a,n){n(3392)},40109:function(e,a,n){n(3392),n(93979),n(45705),n(56450),n(81748),n(30942)},20837:function(e,a,n){n(3392),n(13171),n(45705)},48504:function(e,a,n){n(3392),n(13171),n(45705),n(39777),n(81748)},37903:function(e,a,n){n(45705)},45705:function(e,a,n){n(3392)}}]);