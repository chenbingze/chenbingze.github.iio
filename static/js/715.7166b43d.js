"use strict";(self["webpackChunkai_livestock_fronted"]=self["webpackChunkai_livestock_fronted"]||[]).push([[715],{81618:function(e){(function(a,l){e.exports=l()})(0,(function(){function e(e){var n=[];return e.AMapUI&&n.push(a(e.AMapUI)),e.Loca&&n.push(l(e.Loca)),Promise.all(n)}function a(e){return new Promise((function(a,l){var d=[];if(e.plugins)for(var c=0;c<e.plugins.length;c+=1)-1==o.AMapUI.plugins.indexOf(e.plugins[c])&&d.push(e.plugins[c]);if(t.AMapUI===n.failed)l("前次请求 AMapUI 失败");else if(t.AMapUI===n.notload){t.AMapUI=n.loading,o.AMapUI.version=e.version||o.AMapUI.version,c=o.AMapUI.version;var r=document.body||document.head,p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/ui/"+c+"/main.js",p.onerror=function(e){t.AMapUI=n.failed,l("请求 AMapUI 失败")},p.onload=function(){if(t.AMapUI=n.loaded,d.length)window.AMapUI.loadUI(d,(function(){for(var e=0,l=d.length;e<l;e++){var n=d[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}for(a();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()}));else for(a();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()},r.appendChild(p)}else t.AMapUI===n.loaded?e.version&&e.version!==o.AMapUI.version?l("不允许多个版本 AMapUI 混用"):d.length?window.AMapUI.loadUI(d,(function(){for(var e=0,l=d.length;e<l;e++){var n=d[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}a()})):a():e.version&&e.version!==o.AMapUI.version?l("不允许多个版本 AMapUI 混用"):i.AMapUI.push((function(e){e?l(e):d.length?window.AMapUI.loadUI(d,(function(){for(var e=0,l=d.length;e<l;e++){var n=d[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}a()})):a()}))}))}function l(e){return new Promise((function(a,l){if(t.Loca===n.failed)l("前次请求 Loca 失败");else if(t.Loca===n.notload){t.Loca=n.loading,o.Loca.version=e.version||o.Loca.version;var d=o.Loca.version,c=o.AMap.version.startsWith("2"),r=d.startsWith("2");if(c&&!r||!c&&r)l("JSAPI 与 Loca 版本不对应！！");else{c=o.key,r=document.body||document.head;var p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/loca?v="+d+"&key="+c,p.onerror=function(e){t.Loca=n.failed,l("请求 AMapUI 失败")},p.onload=function(){for(t.Loca=n.loaded,a();i.Loca.length;)i.Loca.splice(0,1)[0]()},r.appendChild(p)}}else t.Loca===n.loaded?e.version&&e.version!==o.Loca.version?l("不允许多个版本 Loca 混用"):a():e.version&&e.version!==o.Loca.version?l("不允许多个版本 Loca 混用"):i.Loca.push((function(e){e?l(e):l()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(n||(n={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},i={AMap:[],AMapUI:[],Loca:[]},d=[],c=function(e){"function"==typeof e&&(t.AMap===n.loaded?e(window.AMap):d.push(e))};return{load:function(a){return new Promise((function(l,i){if(t.AMap==n.failed)i("");else if(t.AMap==n.notload){var r=a.key,p=a.version,u=a.plugins;r?(window.AMap&&"lbs.amap.com"!==location.host&&i("禁止多种API加载方式混用"),o.key=r,o.AMap.version=p||o.AMap.version,o.AMap.plugins=u||o.AMap.plugins,t.AMap=n.loading,p=document.body||document.head,window.___onAPILoaded=function(o){if(delete window.___onAPILoaded,o)t.AMap=n.failed,i(o);else for(t.AMap=n.loaded,e(a).then((function(){l(window.AMap)}))["catch"](i);d.length;)d.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+r+"&plugin="+o.AMap.plugins.join(","),u.onerror=function(e){t.AMap=n.failed,i(e)},p.appendChild(u)):i("请填写key")}else if(t.AMap==n.loaded)if(a.key&&a.key!==o.key)i("多个不一致的 key");else if(a.version&&a.version!==o.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(r=[],a.plugins)for(p=0;p<a.plugins.length;p+=1)-1==o.AMap.plugins.indexOf(a.plugins[p])&&r.push(a.plugins[p]);r.length?window.AMap.plugin(r,(function(){e(a).then((function(){l(window.AMap)}))["catch"](i)})):e(a).then((function(){l(window.AMap)}))["catch"](i)}else if(a.key&&a.key!==o.key)i("多个不一致的 key");else if(a.version&&a.version!==o.AMap.version)i("不允许多个版本 JSAPI 混用");else{var s=[];if(a.plugins)for(p=0;p<a.plugins.length;p+=1)-1==o.AMap.plugins.indexOf(a.plugins[p])&&s.push(a.plugins[p]);c((function(){s.length?window.AMap.plugin(s,(function(){e(a).then((function(){l(window.AMap)}))["catch"](i)})):e(a).then((function(){l(window.AMap)}))["catch"](i)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},i={AMap:[],AMapUI:[],Loca:[]}}}}))},37708:function(e,a,l){l.d(a,{BA:function(){return i},Hg:function(){return t},K:function(){return d},Sg:function(){return o},oE:function(){return c}});var n=l(36026);const o=e=>(0,n.Z)({url:"/company/select",method:"POST",data:e}),t=e=>(0,n.Z)({url:"/company/delete",method:"POST",data:e}),i=e=>(0,n.Z)({url:"/company/create",method:"POST",data:e}),d=e=>(0,n.Z)({url:"/company/update",method:"PUT",data:e}),c=e=>(0,n.Z)({url:"/camera/user/watch",method:"POST",data:e})},71078:function(e,a,l){l.r(a),l.d(a,{default:function(){return ce}});var n=l(384),o=(l(59853),l(8350)),t=(l(85134),l(75311)),i=(l(24971),l(39284),l(24907)),d=(l(40121),l(37336)),c=(l(48504),l(20837),l(88464)),r=(l(45177),l(77049)),p=(l(75915),l(6556)),u=(l(87228),l(94035)),s=(l(96152),l(66252)),m=l(49963),f=l(3577);const h=e=>((0,s.dD)("data-v-34ca3399"),e=e(),(0,s.Cn)(),e),g=h((()=>(0,s._)("span",{class:"top"},"公司名称：",-1))),w=h((()=>(0,s._)("span",{class:"top"},"省/市/区：",-1))),v=h((()=>(0,s._)("span",{class:"top"},"公司介绍：",-1))),y=(0,s.Uk)("搜索"),A=h((()=>(0,s._)("span",{class:"top"},"圈舍数量：",-1))),_=h((()=>(0,s._)("span",null,"-",-1))),b=h((()=>(0,s._)("span",{class:"top"},"项圈数量：",-1))),M=h((()=>(0,s._)("span",{style:{"line-height":"32px"}},"-",-1))),C=h((()=>(0,s._)("span",{class:"top"},"牲畜数量：",-1))),U=h((()=>(0,s._)("span",{style:{"line-height":"32px"}},"-",-1))),k=(0,s.Uk)("重置"),V=(0,s.Uk)("新增"),x=(0,s.Uk)("删除"),I=(0,s.Uk)("导出"),W={class:"app-container"},S=["textContent"],D=["textContent"],L=(0,s.Uk)(" 编辑 "),z=(0,s.Uk)("地图"),P={class:"pagination"},Q={class:"dialog-footer"},H=(0,s.Uk)("取 消"),E=(0,s.Uk)("确 定");function O(e,a,l,h,O,T){const j=u.EZ,K=p.Dv,q=(0,s.up)("elui-china-area-dht"),Z=r.mi,B=c.dq,J=d.$Y,F=d.eI,Y=i.R,R=(0,s.up)("CompanyDetailDialog"),$=t.nH,N=t.ly,X=o.d0,G=n.t;return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(K,{span:7},{default:(0,s.w5)((()=>[g,(0,s.Wm)(j,{modelValue:h.companySelectQuery.name,"onUpdate:modelValue":a[0]||(a[0]=e=>h.companySelectQuery.name=e),placeholder:"请输入公司名称",clearable:"",onKeyup:a[1]||(a[1]=(0,m.D2)((e=>h.handleSearch()),["enter"])),style:{width:"200px"},class:"filter-item"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(K,{span:7},{default:(0,s.w5)((()=>[w,(0,s.Wm)(q,{onChange:a[2]||(a[2]=e=>h.onAreaChange()),modelValue:h.tempLocation,"onUpdate:modelValue":a[3]||(a[3]=e=>h.tempLocation=e),isall:!0,style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(K,{span:7},{default:(0,s.w5)((()=>[v,(0,s.Wm)(j,{modelValue:h.companySelectQuery.introduce,"onUpdate:modelValue":a[4]||(a[4]=e=>h.companySelectQuery.introduce=e),placeholder:"请输入公司介绍",clearable:"",onKeyup:a[5]||(a[5]=(0,m.D2)((e=>h.handleSearch()),["enter"])),style:{width:"200px"},class:"filter-item"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(K,{span:3},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{type:"primary",icon:"Search",onClick:a[6]||(a[6]=e=>h.handleSearch())},{default:(0,s.w5)((()=>[y])),_:1})])),_:1})])),_:1}),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(K,{span:7},{default:(0,s.w5)((()=>[A,(0,s.Wm)(j,{modelValue:h.companySelectQuery.enclosure_min,"onUpdate:modelValue":a[7]||(a[7]=e=>h.companySelectQuery.enclosure_min=e),placeholder:"最小数量",clearable:"",onKeyup:a[8]||(a[8]=(0,m.D2)((e=>h.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"]),_,(0,s.Wm)(j,{modelValue:h.companySelectQuery.enclosure_max,"onUpdate:modelValue":a[9]||(a[9]=e=>h.companySelectQuery.enclosure_max=e),placeholder:"最大数量",clearable:"",onKeyup:a[10]||(a[10]=(0,m.D2)((e=>h.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(K,{span:7},{default:(0,s.w5)((()=>[b,(0,s.Wm)(j,{modelValue:h.companySelectQuery.necklace_min,"onUpdate:modelValue":a[11]||(a[11]=e=>h.companySelectQuery.necklace_min=e),placeholder:"最小数量",clearable:"",onKeyup:a[12]||(a[12]=(0,m.D2)((e=>h.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"]),M,(0,s.Wm)(j,{modelValue:h.companySelectQuery.necklace_max,"onUpdate:modelValue":a[13]||(a[13]=e=>h.companySelectQuery.necklace_max=e),placeholder:"最大数量",clearable:"",onKeyup:a[14]||(a[14]=(0,m.D2)((e=>h.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(K,{span:7},{default:(0,s.w5)((()=>[C,(0,s.Wm)(j,{modelValue:h.companySelectQuery.livestock_min,"onUpdate:modelValue":a[15]||(a[15]=e=>h.companySelectQuery.livestock_min=e),placeholder:"最小数量",clearable:"",onKeyup:a[16]||(a[16]=(0,m.D2)((e=>h.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"]),U,(0,s.Wm)(j,{modelValue:h.companySelectQuery.livestock_max,"onUpdate:modelValue":a[17]||(a[17]=e=>h.companySelectQuery.livestock_max=e),placeholder:"最大数量",clearable:"",onKeyup:a[18]||(a[18]=(0,m.D2)((e=>h.handleSearch()),["enter"])),style:{width:"98px"},class:"filter-item"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(K,{span:3},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{icon:"Refresh",onClick:a[19]||(a[19]=e=>h.resetQuery())},{default:(0,s.w5)((()=>[k])),_:1})])),_:1})])),_:1}),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(B,{gutter:10,class:"mb8",style:{"margin-bottom":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{span:1.5},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{type:"primary",plain:"",icon:"Plus",onClick:a[20]||(a[20]=e=>h.handleAdd())},{default:(0,s.w5)((()=>[V])),_:1})])),_:1},8,["span"]),(0,s.Wm)(K,{span:1.5},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{type:"danger",plain:"",icon:"Delete",onClick:a[21]||(a[21]=e=>h.handleDelete()),disabled:h.hasSelected},{default:(0,s.w5)((()=>[x])),_:1},8,["disabled"])])),_:1},8,["span"]),(0,s.Wm)(K,{span:1.5},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{type:"warning",plain:"",icon:"Download",onClick:h.exportTable},{default:(0,s.w5)((()=>[I])),_:1},8,["onClick"])])),_:1},8,["span"])])),_:1})])),_:1}),(0,s._)("div",W,[(0,s.wy)(((0,s.wg)(),(0,s.j4)(F,{data:h.tableData,style:{width:"100%"},border:!0,onSelectionChange:h.onSelectionChange,id:"out-table"},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{type:"selection",width:"55"}),(0,s.Wm)(J,{label:"序号",width:"50",type:"index",align:"center"},{default:(0,s.w5)((e=>[(0,s._)("span",{textContent:(0,f.zw)(h.getIndex(e.$index))},null,8,S)])),_:1}),(0,s.Wm)(J,{label:"公司名",align:"center",prop:"fields.name","show-overflow-tooltip":!0}),(0,s.Wm)(J,{label:"公司介绍",align:"center",prop:"fields.introduce","show-overflow-tooltip":!0}),(0,s.Wm)(J,{label:"所在地区",align:"center","show-overflow-tooltip":!0},{default:(0,s.w5)((e=>[(0,s._)("span",{textContent:(0,f.zw)(h.formatArea(e.row.fields))},null,8,D)])),_:1}),(0,s.Wm)(J,{label:"用户数",align:"center",prop:"fields.user_number",width:"70px","show-overflow-tooltip":!0}),(0,s.Wm)(J,{label:"养殖场数量",align:"center",prop:"fields.farm_number",width:"100px","show-overflow-tooltip":!0}),(0,s.Wm)(J,{label:"牲畜数",align:"center",prop:"fields.livestock_number",width:"70px","show-overflow-tooltip":!0}),(0,s.Wm)(J,{label:"项圈数",align:"center",width:"70px",prop:"fields.necklace_number","show-overflow-tooltip":!0}),(0,s.Wm)(J,{label:"操作",align:"center",width:"150px","class-name":"small-padding fixed-width"},{default:(0,s.w5)((e=>[(0,s.Wm)(Z,{link:"",type:"primary",icon:"Edit",onClick:a=>h.handleEdit(e.row)},{default:(0,s.w5)((()=>[L])),_:2},1032,["onClick"]),(0,s.Wm)(Z,{link:"",type:"primary",icon:"MapLocation",onClick:a=>h.handleDetail(e.row)},{default:(0,s.w5)((()=>[z])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[G,h.loading]]),(0,s._)("div",P,[(0,s.Wm)(Y,{background:"",layout:"total, sizes, prev, pager, next","current-page":h.pageParams.pageIndex,"onUpdate:current-page":a[22]||(a[22]=e=>h.pageParams.pageIndex=e),"page-size":h.pageParams.pageSize,"onUpdate:page-size":a[23]||(a[23]=e=>h.pageParams.pageSize=e),total:h.pageParams.pageTotal,"page-sizes":[2,5,10,20,30,50,100],onCurrentChange:h.handlePageChange,onSizeChange:h.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])]),(0,s.Wm)(R,{detailVisible:h.detailVisible,"onUpdate:detailVisible":a[24]||(a[24]=e=>h.detailVisible=e),companyDetail:h.companyDetail,"onUpdate:companyDetail":a[25]||(a[25]=e=>h.companyDetail=e),onOnConfirm:h.onDialogConfirm},null,8,["detailVisible","companyDetail","onOnConfirm"]),(0,s.Wm)(X,{title:h.dialogTitle,modelValue:h.dialogVisible,"onUpdate:modelValue":a[34]||(a[34]=e=>h.dialogVisible=e),width:"40%",ref:"dialog"},{footer:(0,s.w5)((()=>[(0,s._)("span",Q,[(0,s.Wm)(Z,{onClick:a[32]||(a[32]=e=>h.dialogVisible=!1)},{default:(0,s.w5)((()=>[H])),_:1}),(0,s.Wm)(Z,{type:"primary",onClick:a[33]||(a[33]=e=>h.submitForm())},{default:(0,s.w5)((()=>[E])),_:1})])])),default:(0,s.w5)((()=>[(0,s.Wm)(N,{"label-width":"100px","label-position":"left",style:{width:"400px","margin-left":"50px"},rules:h.rules,model:h.form,ref:"dialogForm"},{default:(0,s.w5)((()=>[(0,s.Wm)($,{label:"公司名称",prop:"name"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{modelValue:h.form.name,"onUpdate:modelValue":a[26]||(a[26]=e=>h.form.name=e),placeholder:"请输入公司名称",style:{width:"200px"},class:"inline-input"},null,8,["modelValue"])])),_:1}),(0,s.Wm)($,{label:"公司所在地",prop:"location"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{onChange:a[27]||(a[27]=e=>h.onCreateAreaChanged()),modelValue:h.tempCreateLocation,"onUpdate:modelValue":a[28]||(a[28]=e=>h.tempCreateLocation=e),style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)($,{label:"经纬度",prop:"lng"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{modelValue:h.form.lng,"onUpdate:modelValue":a[29]||(a[29]=e=>h.form.lng=e),placeholder:"请输入经度",style:{width:"200px"},class:"inline-input"},null,8,["modelValue"])])),_:1}),(0,s.Wm)($,{prop:"lat"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{modelValue:h.form.lat,"onUpdate:modelValue":a[30]||(a[30]=e=>h.form.lat=e),placeholder:"请输入纬度",style:{width:"200px"},class:"inline-input"},null,8,["modelValue"])])),_:1}),(0,s.Wm)($,{label:"公司简介",prop:"introduce"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{modelValue:h.form.introduce,"onUpdate:modelValue":a[31]||(a[31]=e=>h.form.introduce=e),placeholder:"请输入公司简介",style:{width:"200px"},class:"inline-input",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["title","modelValue"])])],64)}l(21703);var T=l(37708),j=l(2262),K=l(70523);const q=e=>((0,s.dD)("data-v-7eac1589"),e=e(),(0,s.Cn)(),e),Z=q((()=>(0,s._)("div",null,null,-1))),B=q((()=>(0,s._)("div",{id:"container"},null,-1))),J={style:{"text-align":"center"}},F=(0,s.Uk)("取消"),Y=(0,s.Uk)("确认");function R(e,a,l,n,t,i){const d=r.mi,c=o.d0;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c,{modelValue:e.visible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.visible=a),onClose:a[3]||(a[3]=e=>n.onCloseDialog()),onOpen:a[4]||(a[4]=e=>n.onOpenDialog()),title:"公司详情","show-close":!0,center:"",width:"90%","append-to-body":"",ref:"dialog"},{footer:(0,s.w5)((()=>[(0,s._)("div",J,[(0,s.Wm)(d,{onClick:a[0]||(a[0]=e=>n.handleCancel())},{default:(0,s.w5)((()=>[F])),_:1}),(0,s.Wm)(d,{type:"primary",onClick:a[1]||(a[1]=e=>n.handleConfirm())},{default:(0,s.w5)((()=>[Y])),_:1})])])),default:(0,s.w5)((()=>[Z,B])),_:1},8,["modelValue"])])}var $=l(81618),N=l.n($),X={props:{detailVisible:{type:Boolean,default:!1},companyDetail:{type:Object}},emits:["update:detailVisible","on-confirm"],setup(e,{emit:a}){const{detailVisible:l,companyDetail:n}=(0,j.BK)(e),o=(0,j.qj)({visible:l.value,detail:n.value}),t=(0,j.XI)(null),i=(0,j.iH)(null);function d(){a("update:detailVisible",!1),console.log("on close dialog")}function c(){console.log("state.visible",o.detail),u()}function r(){a("update:detailVisible",!1)}function p(){a("on-confirm","子组件的值")}function u(){const e=n.value.fields.lng,a=n.value.fields.lat;N().load({key:"27adc4106b70fb282c08cfb77548785a",version:"2.0",plugins:[""]}).then((l=>{this.map=new l.Map("container",{viewMode:"3D",zoom:14,center:[e,a]});const n=new l.Marker({position:new l.LngLat(e,a),title:farmDetail.value.fields.name});this.map.add(n)})).catch((e=>{console.log(e)}))}return(0,s.YP)(l,(e=>{o.visible=e}),{immediate:!0}),(0,s.bv)((()=>{i.value.rendered=!0,setTimeout((()=>{u()}),1e3)})),window._AMapSecurityConfig={securityJsCode:"1ef06a21c2bad86281c3e75ba84df476"},{map:t,...(0,j.BK)(o),onCloseDialog:d,onOpenDialog:c,handleCancel:r,handleConfirm:p}}},G=l(83744);const ee=(0,G.Z)(X,[["render",R],["__scopeId","data-v-7eac1589"]]);var ae=ee,le=l(45244),ne=l(50592),oe=l(84105);const te=(new K.EluiChinaAreaDht.ChinaArea).chinaAreaflat;var ie={components:{EluiChinaAreaDht:K.EluiChinaAreaDht,CompanyDetailDialog:ae},setup(){const e=(0,j.iH)(!1);let a=(0,j.qj)({}),l=(0,j.iH)([]);const n=(0,j.iH)([]);let o=(0,j.iH)([]);const t=(0,j.iH)(!0),i=(0,j.qj)({pageIndex:1,pageSize:10,pageTotal:0}),d=(0,j.iH)(!1);let c=(0,j.iH)({});const r=(0,j.iH)(!1),p=(0,j.iH)("");let u=0,m=(0,j.qj)({name:"",provience:"",city:"",county:"",lng:"",lat:"",introduce:""}),f=(0,j.iH)([]);const h=(0,j.iH)(null),g=(0,j.iH)(null),w=(e,a,l)=>{console.log("valid value",f),f.value&&f.value.length>0?l():l(new Error("请选择公司所在地"))},v=(0,j.qj)({name:[{required:!0,message:"请输入公司名",trigger:"blur"}],location:[{required:!0,trigger:"blur",validator:w}]});function y(){for(let e in m)m[e]="";f.value=[],(0,s.Y3)((()=>{g.value.clearValidate()}))}function A(){u=0,y(),p.value="新建公司",r.value=!0}function _(){m.provience=f.value[0],m.city=f.value[1],m.county=f.value[2],console.log("onCreateAreaChanged: ",m)}function b(){g.value.validate((e=>{e?0===u?(console.log("表单校验通过---新增"),(0,T.BA)(m).then((e=>{"200"==e.code&&"创建成功"==e.message?(le.z8.success("公司创建成功"),M()):le.z8.error(e.message)})),r.value=!1):1===u&&(console.log("表单校验通过---修改"),console.log("edit form",m),(0,T.K)(m).then((e=>{"200"==e.code&&"修改成功"==e.message?(le.z8.success("信息修改成功"),M()):le.z8.error(e.message)})),r.value=!1):le.z8.error("表单校验不通过")}))}async function M(){await(0,T.Sg)(a).then((e=>{n.value=e.data,console.log("companyList.value",n.value)})),n.value?(i.pageTotal=n.value.length,x(i.pageIndex,i.pageSize)):(i.pageTotal=0,o.value=[])}function C(){i.pageIndex=1;for(let e in a)""===a[e]&&delete a[e];console.log("companySelectQuery",a),M()}function U(e){let a=te[e.provience]?te[e.provience].label:"",l=te[e.city]?te[e.city].label:"",n=te[e.county]?te[e.county].label:"";return a+" "+l+" "+n}function k(){delete a["provience"],delete a["city"],delete a["county"],"all"==l.value[l.value.length-1]&&l.value.pop(),l.value[0]&&(a.provience=l.value[0]),l.value[1]&&(a.city=l.value[1]),l.value[2]&&(a.county=l.value[2])}function V(){l.value=[],Object.keys(a).forEach((e=>{delete a[e]}))}function x(e,a){let l=(e-1)*a,t=l+a;o.value=n.value.slice(l,t)}function I(e){i.pageIndex=e,x(i.pageIndex,i.pageSize)}function W(e){i.pageSize=e,x(1,i.pageSize)}function S(e){return(i.pageIndex-1)*i.pageSize+e+1}function D(e){console.log("handle Detail"),d.value=!0,c.value=e}function L(){d.value=!1}let z=null;function P(e){z=e.map((e=>e.pk)).join(),console.log("selection companyDeleteIds: ",z),t.value=!e.length}function Q(){ne.T.alert("确定要删除吗？","提示",{type:"warning"}).then((()=>{(0,T.Hg)({id:z}).then((e=>{"200"==e.code&&"删除成功"==e.message?(le.z8.success("删除公司成功"),M()):le.z8.error(e.message)}))})).catch((()=>{le.z8.error("删除请求出错")}))}function H(){let e=document.querySelector("#out-table");if(!e)throw new Error("没获取到table DOM");const a=oe.P6.table_to_book(e,{raw:!0});return(0,oe.NC)(a,"export.xlsx",{type:"binary"})}function E(e){console.log("row",e),u=1,y(),p.value="编辑用户",m.id=e.pk,m.name=e.fields["name"],m.provience=e.fields["provience"],m.city=e.fields["city"],m.county=e.fields["county"],m.lng=e.fields["lng"],m.lat=e.fields["lat"],m.introduce=e.fields["introduce"],f.value.push(m.provience),f.value.push(m.city),f.value.push(m.county),console.log("edit form content ",m),r.value=!0}return M(),{loading:e,companySelectQuery:a,tempLocation:l,companyList:n,pageParams:i,tableData:o,hasSelected:t,detailVisible:d,companyDetail:c,dialogVisible:r,form:m,rules:v,dialog:h,dialogForm:g,dialogTitle:p,onAreaChange:k,handlePageChange:I,handleSizeChange:W,handleSearch:C,handleAdd:A,submitForm:b,tempCreateLocation:f,onCreateAreaChanged:_,handleDelete:Q,handleEdit:E,resetQuery:V,formatArea:U,getIndex:S,handleDetail:D,onDialogConfirm:L,onSelectionChange:P,exportTable:H}}};const de=(0,G.Z)(ie,[["render",O],["__scopeId","data-v-34ca3399"]]);var ce=de}}]);